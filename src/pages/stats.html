<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Scoreboard</title>
    <link rel="stylesheet" href="/common/bootstrap/css/bootstrap.min.css" type="text/css" media="screen" charset="utf-8">
    <script src="/common/jquery.min.js"></script>
    {{&app_init_js}}
  </head>
  <body>
    <div class="container">
      <div class="navbar">
        <div class="navbar-inner">
          <a class="brand" href="#">Program Size:</a>
          <ul class="nav">
            <li class="active"><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li><a href="#">6</a></li>
            <li><a href="#">7</a></li>
            <li><a href="#">8</a></li>
            <li><a href="#">9</a></li>
            <li><a href="#">10</a></li>
            <li><a href="#">11</a></li>
            <li><a href="#">12</a></li>
            <li><a href="#">13</a></li>
            <li><a href="#">14</a></li>
            <li><a href="#">15</a></li>
            <li><a href="#">16</a></li>
          </ul>
        </div>
      </div>
      <div id="scoreboard"></div>
    </div>

    <script type="text/javascript">
      var size = 3;
      var loadScores = function() {
        var url = './getStats?size=' + size;
        var scores = $.getJSON(url);
        scores.done(function(scoreData) {
          var $table = $('<table class="table table-striped table-hover">');
          var $thead = $('<thead><tr><th>Name</th><th>Output Length</th><th>Program Size</th></tr></thead>');
          var $tbody= $('<tbody>');
          $table.append($thead);
          $table.append($tbody);

          for (var i = 0; i != scoreData.length; i++) {
            var $tr = $('<tr>');

            var score = scoreData[i];
            var $td = $('<td class="user">');
            $td.data('profileName', score.user);
            $td.text(score.user);
            
            $tr.append($td);
            $tr.append($('<td>').text(score.score));
            $tr.append($('<td>').text(score.size));

            $tbody.append($tr);
          }
        });
      };
      $(document).ready( loadScores );

      $('.nav li').click( function( ) {
        size = parseInt($(this).text());
        loadScores();
      } );
    </script>
  </body>
</html>
